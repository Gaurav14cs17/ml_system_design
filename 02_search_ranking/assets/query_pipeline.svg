<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 400">
  <defs>
    <linearGradient id="inputGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#ff6b6b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#feca57;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="processGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#5f27cd;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#a55eea;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="outputGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#26de81;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#20bf6b;stop-opacity:1" />
    </linearGradient>
    <filter id="glow">
      <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="400" fill="#0d1117"/>
  
  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" fill="#f8fafc" font-family="Arial, sans-serif" font-size="22" font-weight="bold">Query Understanding Pipeline</text>
  
  <!-- Input Query -->
  <rect x="30" y="70" width="180" height="70" rx="10" fill="url(#inputGrad)" filter="url(#glow)"/>
  <text x="120" y="100" text-anchor="middle" fill="#f8fafc" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Raw Query</text>
  <text x="120" y="120" text-anchor="middle" fill="#f8fafc" font-family="Arial, sans-serif" font-size="11">"runing shoees nikee"</text>
  
  <!-- Arrow 1 -->
  <path d="M215 105 L245 105" stroke="#feca57" stroke-width="3" fill="none"/>
  <polygon points="245,100 255,105 245,110" fill="#feca57"/>
  
  <!-- Step 1: Normalization -->
  <rect x="260" y="60" width="120" height="90" rx="8" fill="#1e2430" stroke="#5f27cd" stroke-width="2"/>
  <text x="320" y="85" text-anchor="middle" fill="#a55eea" font-family="Arial, sans-serif" font-size="11" font-weight="bold">1. Normalize</text>
  <text x="320" y="105" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">• Lowercase</text>
  <text x="320" y="120" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">• Trim spaces</text>
  <text x="320" y="135" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">• Unicode</text>
  
  <!-- Arrow 2 -->
  <path d="M385 105 L405 105" stroke="#5f27cd" stroke-width="2" fill="none"/>
  <polygon points="405,100 415,105 405,110" fill="#5f27cd"/>
  
  <!-- Step 2: Spell Correction -->
  <rect x="420" y="60" width="120" height="90" rx="8" fill="#1e2430" stroke="#5f27cd" stroke-width="2"/>
  <text x="480" y="85" text-anchor="middle" fill="#a55eea" font-family="Arial, sans-serif" font-size="11" font-weight="bold">2. Spell Fix</text>
  <text x="480" y="105" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">runing → running</text>
  <text x="480" y="120" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">shoees → shoes</text>
  <text x="480" y="135" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">nikee → nike</text>
  
  <!-- Arrow 3 -->
  <path d="M545 105 L565 105" stroke="#5f27cd" stroke-width="2" fill="none"/>
  <polygon points="565,100 575,105 565,110" fill="#5f27cd"/>
  
  <!-- Step 3: Tokenization -->
  <rect x="580" y="60" width="120" height="90" rx="8" fill="#1e2430" stroke="#5f27cd" stroke-width="2"/>
  <text x="640" y="85" text-anchor="middle" fill="#a55eea" font-family="Arial, sans-serif" font-size="11" font-weight="bold">3. Tokenize</text>
  <text x="640" y="110" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">["running",</text>
  <text x="640" y="125" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">"shoes", "nike"]</text>
  
  <!-- Arrow 4 -->
  <path d="M705 105 L725 105" stroke="#5f27cd" stroke-width="2" fill="none"/>
  <polygon points="725,100 735,105 725,110" fill="#5f27cd"/>
  
  <!-- Step 4: NER -->
  <rect x="740" y="60" width="130" height="90" rx="8" fill="#1e2430" stroke="#5f27cd" stroke-width="2"/>
  <text x="805" y="85" text-anchor="middle" fill="#a55eea" font-family="Arial, sans-serif" font-size="11" font-weight="bold">4. NER</text>
  <rect x="755" y="100" width="50" height="18" rx="3" fill="#ff6b6b"/>
  <text x="780" y="113" text-anchor="middle" fill="#f8fafc" font-family="Arial, sans-serif" font-size="8">BRAND</text>
  <text x="820" y="113" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">nike</text>
  <rect x="755" y="125" width="60" height="18" rx="3" fill="#54a0ff"/>
  <text x="785" y="138" text-anchor="middle" fill="#f8fafc" font-family="Arial, sans-serif" font-size="8">PRODUCT</text>

  <!-- Second Row -->
  
  <!-- Arrow down from NER -->
  <path d="M805 155 L805 185 L750 185 L750 215" stroke="#5f27cd" stroke-width="2" fill="none" stroke-dasharray="5,3"/>
  
  <!-- Step 5: Intent Classification -->
  <rect x="30" y="200" width="160" height="90" rx="8" fill="#1e2430" stroke="#26de81" stroke-width="2"/>
  <text x="110" y="225" text-anchor="middle" fill="#26de81" font-family="Arial, sans-serif" font-size="11" font-weight="bold">5. Intent</text>
  <rect x="45" y="240" width="80" height="18" rx="3" fill="#26de81"/>
  <text x="85" y="253" text-anchor="middle" fill="#f8fafc" font-family="Arial, sans-serif" font-size="9">Purchase</text>
  <text x="140" y="253" fill="#8b949e" font-family="Arial, sans-serif" font-size="10">92%</text>
  <rect x="45" y="265" width="50" height="14" rx="3" fill="#3d4f5f"/>
  <text x="70" y="276" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="8">Browse</text>
  <text x="110" y="276" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">8%</text>
  
  <!-- Arrow right -->
  <path d="M195 245 L225 245" stroke="#26de81" stroke-width="2" fill="none"/>
  <polygon points="225,240 235,245 225,250" fill="#26de81"/>
  
  <!-- Step 6: Query Expansion -->
  <rect x="240" y="200" width="160" height="90" rx="8" fill="#1e2430" stroke="#26de81" stroke-width="2"/>
  <text x="320" y="225" text-anchor="middle" fill="#26de81" font-family="Arial, sans-serif" font-size="11" font-weight="bold">6. Expansion</text>
  <text x="320" y="248" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">+ sneakers</text>
  <text x="320" y="263" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">+ athletic footwear</text>
  <text x="320" y="278" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">+ jogging shoes</text>
  
  <!-- Arrow right -->
  <path d="M405 245 L435 245" stroke="#26de81" stroke-width="2" fill="none"/>
  <polygon points="435,240 445,245 435,250" fill="#26de81"/>
  
  <!-- Step 7: Embedding -->
  <rect x="450" y="200" width="160" height="90" rx="8" fill="#1e2430" stroke="#26de81" stroke-width="2"/>
  <text x="530" y="225" text-anchor="middle" fill="#26de81" font-family="Arial, sans-serif" font-size="11" font-weight="bold">7. Embedding</text>
  <text x="530" y="248" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="9">BERT / Sentence-T</text>
  <text x="530" y="268" text-anchor="middle" fill="#54a0ff" font-family="Arial, sans-serif" font-size="9">[0.23, -0.45, ...]</text>
  <text x="530" y="283" text-anchor="middle" fill="#8b949e" font-family="Arial, sans-serif" font-size="8">384-dim vector</text>
  
  <!-- Arrow right -->
  <path d="M615 245 L645 245" stroke="#26de81" stroke-width="2" fill="none"/>
  <polygon points="645,240 655,245 645,250" fill="#26de81"/>
  
  <!-- Output: Structured Query -->
  <rect x="660" y="185" width="210" height="120" rx="12" fill="url(#outputGrad)" filter="url(#glow)"/>
  <text x="765" y="210" text-anchor="middle" fill="#f8fafc" font-family="Arial, sans-serif" font-size="12" font-weight="bold">✓ Structured Query</text>
  <text x="680" y="235" fill="#f8fafc" font-family="Arial, sans-serif" font-size="9">text: "running shoes nike"</text>
  <text x="680" y="252" fill="#f8fafc" font-family="Arial, sans-serif" font-size="9">intent: purchase</text>
  <text x="680" y="269" fill="#f8fafc" font-family="Arial, sans-serif" font-size="9">brand: nike</text>
  <text x="680" y="286" fill="#f8fafc" font-family="Arial, sans-serif" font-size="9">embedding: [...]</text>
  
  <!-- Processing time indicator -->
  <rect x="350" y="330" width="200" height="30" rx="15" fill="#1e2430" stroke="#5f27cd" stroke-width="1"/>
  <text x="450" y="350" text-anchor="middle" fill="#a55eea" font-family="Arial, sans-serif" font-size="11">⚡ Total: ~15ms</text>
</svg>

