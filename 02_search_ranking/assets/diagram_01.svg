<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 750 700">
  <defs>
    <linearGradient id="queryGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#06b6d4"/>
      <stop offset="100%" style="stop-color:#0891b2"/>
    </linearGradient>
    <linearGradient id="quGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6"/>
      <stop offset="100%" style="stop-color:#7c3aed"/>
    </linearGradient>
    <linearGradient id="retGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6"/>
      <stop offset="100%" style="stop-color:#2563eb"/>
    </linearGradient>
    <linearGradient id="rankGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b"/>
      <stop offset="100%" style="stop-color:#d97706"/>
    </linearGradient>
    <linearGradient id="resultGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981"/>
      <stop offset="100%" style="stop-color:#059669"/>
    </linearGradient>
    <filter id="shadow" x="-5%" y="-5%" width="110%" height="115%">
      <feDropShadow dx="0" dy="3" stdDeviation="4" flood-opacity="0.15"/>
    </filter>
  </defs>
  
  <rect width="100%" height="100%" fill="#0f172a"/>
  
  <!-- Title -->
  <text x="375" y="30" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="20" font-weight="bold" fill="#f8fafc">üîç Search Ranking System Architecture</text>
  
  <!-- User Query -->
  <g filter="url(#shadow)">
    <rect x="300" y="50" width="150" height="45" rx="22" fill="url(#queryGrad)"/>
    <text x="375" y="79" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="13" font-weight="bold" fill="#fff">üë§ User Query</text>
  </g>
  
  <path d="M375 100 L375 125" stroke="#64748b" stroke-width="2"/>
  <polygon points="370,125 375,140 380,125" fill="#64748b"/>
  
  <!-- Query Understanding -->
  <g filter="url(#shadow)">
    <rect x="75" y="145" width="600" height="100" rx="12" fill="#1e293b"/>
    <rect x="75" y="145" width="600" height="35" rx="12 12 0 0" fill="url(#quGrad)"/>
    <text x="375" y="169" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="14" font-weight="bold" fill="#fff">üîç QUERY UNDERSTANDING</text>
  </g>
  
  <g font-family="Segoe UI, sans-serif" font-size="10">
    <rect x="100" y="195" width="120" height="35" rx="6" fill="#4c1d95"/>
    <text x="160" y="217" text-anchor="middle" fill="#c4b5fd">Spell Correction</text>
    <rect x="240" y="195" width="120" height="35" rx="6" fill="#4c1d95"/>
    <text x="300" y="217" text-anchor="middle" fill="#c4b5fd">Intent Classifier</text>
    <rect x="380" y="195" width="100" height="35" rx="6" fill="#4c1d95"/>
    <text x="430" y="217" text-anchor="middle" fill="#c4b5fd">NER</text>
    <rect x="500" y="195" width="140" height="35" rx="6" fill="#4c1d95"/>
    <text x="570" y="217" text-anchor="middle" fill="#c4b5fd">Query Expansion</text>
  </g>
  
  <path d="M375 250 L375 275" stroke="#64748b" stroke-width="2"/>
  <polygon points="370,275 375,290 380,275" fill="#64748b"/>
  
  <!-- Retrieval Stage -->
  <g filter="url(#shadow)">
    <rect x="75" y="295" width="600" height="150" rx="12" fill="#1e293b"/>
    <rect x="75" y="295" width="600" height="35" rx="12 12 0 0" fill="url(#retGrad)"/>
    <text x="375" y="319" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="14" font-weight="bold" fill="#fff">üìö RETRIEVAL STAGE</text>
  </g>
  
  <g font-family="Segoe UI, sans-serif">
    <rect x="110" y="345" width="200" height="60" rx="8" fill="#1e40af"/>
    <text x="210" y="370" text-anchor="middle" font-size="11" font-weight="bold" fill="#93c5fd">Inverted Index</text>
    <text x="210" y="388" text-anchor="middle" font-size="9" fill="#60a5fa">(BM25/TF-IDF)</text>
    
    <rect x="440" y="345" width="200" height="60" rx="8" fill="#1e40af"/>
    <text x="540" y="370" text-anchor="middle" font-size="11" font-weight="bold" fill="#93c5fd">Vector Index</text>
    <text x="540" y="388" text-anchor="middle" font-size="9" fill="#60a5fa">(ANN/HNSW)</text>
    
    <text x="210" y="420" text-anchor="middle" font-size="9" fill="#64748b">Billions ‚Üí 1000s</text>
    <text x="540" y="420" text-anchor="middle" font-size="9" fill="#64748b">Billions ‚Üí 1000s</text>
  </g>
  
  <!-- Merger -->
  <path d="M310 410 L375 435" stroke="#64748b" stroke-width="1"/>
  <path d="M440 410 L375 435" stroke="#64748b" stroke-width="1"/>
  <text x="375" y="432" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="8" fill="#94a3b8">Candidate Merger (~1000 docs)</text>
  
  <path d="M375 450 L375 475" stroke="#64748b" stroke-width="2"/>
  <polygon points="370,475 375,490 380,475" fill="#64748b"/>
  
  <!-- Ranking Stage -->
  <g filter="url(#shadow)">
    <rect x="75" y="495" width="600" height="120" rx="12" fill="#1e293b"/>
    <rect x="75" y="495" width="600" height="35" rx="12 12 0 0" fill="url(#rankGrad)"/>
    <text x="375" y="519" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="14" font-weight="bold" fill="#fff">üéØ RANKING STAGE</text>
  </g>
  
  <g font-family="Segoe UI, sans-serif" font-size="10">
    <rect x="100" y="545" width="160" height="55" rx="6" fill="#78350f"/>
    <text x="180" y="567" text-anchor="middle" font-weight="bold" fill="#fcd34d">Feature Store</text>
    <text x="180" y="583" text-anchor="middle" font-size="8" fill="#fbbf24">Query ‚Ä¢ Doc ‚Ä¢ Interaction</text>
    
    <rect x="295" y="545" width="160" height="55" rx="6" fill="#78350f"/>
    <text x="375" y="567" text-anchor="middle" font-weight="bold" fill="#fcd34d">ML Model</text>
    <text x="375" y="583" text-anchor="middle" font-size="8" fill="#fbbf24">LambdaMART / BERT</text>
    
    <rect x="490" y="545" width="160" height="55" rx="6" fill="#78350f"/>
    <text x="570" y="567" text-anchor="middle" font-weight="bold" fill="#fcd34d">Business Rules</text>
    <text x="570" y="583" text-anchor="middle" font-size="8" fill="#fbbf24">Boost ‚Ä¢ Filter ‚Ä¢ Diversity</text>
  </g>
  
  <text x="375" y="625" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="9" fill="#64748b">1000 ‚Üí Top 10</text>
  
  <path d="M375 630 L375 655" stroke="#64748b" stroke-width="2"/>
  <polygon points="370,655 375,670 380,655" fill="#64748b"/>
  
  <!-- Results -->
  <g filter="url(#shadow)">
    <rect x="275" y="675" width="200" height="40" rx="20" fill="url(#resultGrad)"/>
    <text x="375" y="700" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="13" font-weight="bold" fill="#fff">‚úÖ Ranked Results</text>
  </g>
</svg>
