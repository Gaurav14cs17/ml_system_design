<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 750 450">
  <defs>
    <linearGradient id="ndcgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#22c55e"/>
      <stop offset="100%" style="stop-color:#16a34a"/>
    </linearGradient>
    <filter id="shadow" x="-5%" y="-5%" width="110%" height="115%">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-opacity="0.12"/>
    </filter>
  </defs>
  
  <rect width="100%" height="100%" fill="#0f172a"/>
  
  <g filter="url(#shadow)">
    <rect x="200" y="20" width="350" height="50" rx="12" fill="url(#ndcgGrad)"/>
    <text x="375" y="52" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="20" font-weight="bold" fill="#f8fafc">ðŸ“Š NDCG Calculation Example</text>
  </g>
  
  <!-- Example ranking -->
  <g filter="url(#shadow)">
    <rect x="40" y="90" width="670" height="100" rx="12" fill="#0f172a"/>
    <text x="375" y="115" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="14" font-weight="bold" fill="#f8fafc">Example Ranking (relevance scores: 0-3)</text>
    
    <!-- Position boxes -->
    <g transform="translate(60, 130)">
      <rect x="0" y="0" width="80" height="50" rx="6" fill="#dcfce7"/>
      <text x="40" y="20" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="11" font-weight="bold" fill="#166534">Pos 1</text>
      <text x="40" y="40" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="18" font-weight="bold" fill="#15803d">rel=3</text>
    </g>
    <g transform="translate(155, 130)">
      <rect x="0" y="0" width="80" height="50" rx="6" fill="#dbeafe"/>
      <text x="40" y="20" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="11" font-weight="bold" fill="#1e40af">Pos 2</text>
      <text x="40" y="40" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="18" font-weight="bold" fill="#1d4ed8">rel=2</text>
    </g>
    <g transform="translate(250, 130)">
      <rect x="0" y="0" width="80" height="50" rx="6" fill="#dcfce7"/>
      <text x="40" y="20" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="11" font-weight="bold" fill="#166534">Pos 3</text>
      <text x="40" y="40" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="18" font-weight="bold" fill="#15803d">rel=3</text>
    </g>
    <g transform="translate(345, 130)">
      <rect x="0" y="0" width="80" height="50" rx="6" fill="#450a0a"/>
      <text x="40" y="20" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="11" font-weight="bold" fill="#991b1b">Pos 4</text>
      <text x="40" y="40" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="18" font-weight="bold" fill="#b91c1c">rel=0</text>
    </g>
    <g transform="translate(440, 130)">
      <rect x="0" y="0" width="80" height="50" rx="6" fill="#422006"/>
      <text x="40" y="20" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="11" font-weight="bold" fill="#92400e">Pos 5</text>
      <text x="40" y="40" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="18" font-weight="bold" fill="#a16207">rel=1</text>
    </g>
    <g transform="translate(535, 130)">
      <rect x="0" y="0" width="80" height="50" rx="6" fill="#dbeafe"/>
      <text x="40" y="20" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="11" font-weight="bold" fill="#1e40af">Pos 6</text>
      <text x="40" y="40" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="18" font-weight="bold" fill="#1d4ed8">rel=2</text>
    </g>
  </g>
  
  <!-- DCG Calculation -->
  <g filter="url(#shadow)">
    <rect x="40" y="210" width="325" height="210" rx="12" fill="#0f172a"/>
    <rect x="40" y="210" width="325" height="40" rx="12 12 0 0" fill="#6366f1"/>
    <text x="202" y="237" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="14" font-weight="bold" fill="#f8fafc">DCG Calculation</text>
    
    <text x="60" y="275" font-family="Segoe UI, sans-serif" font-size="12" font-weight="bold" fill="#f8fafc">Formula: DCG@k = Î£ (reláµ¢ / logâ‚‚(i+1))</text>
    
    <text x="60" y="305" font-family="monospace" font-size="11" fill="#475569">Pos 1: 3 / logâ‚‚(2) = 3.00</text>
    <text x="60" y="325" font-family="monospace" font-size="11" fill="#475569">Pos 2: 2 / logâ‚‚(3) = 1.26</text>
    <text x="60" y="345" font-family="monospace" font-size="11" fill="#475569">Pos 3: 3 / logâ‚‚(4) = 1.50</text>
    <text x="60" y="365" font-family="monospace" font-size="11" fill="#475569">Pos 4: 0 / logâ‚‚(5) = 0.00</text>
    <text x="60" y="385" font-family="monospace" font-size="11" fill="#475569">Pos 5: 1 / logâ‚‚(6) = 0.39</text>
    
    <rect x="55" y="395" width="150" height="20" rx="4" fill="#e0e7ff"/>
    <text x="130" y="409" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="12" font-weight="bold" fill="#4338ca">DCG@5 = 6.15</text>
  </g>
  
  <!-- IDCG Calculation -->
  <g filter="url(#shadow)">
    <rect x="385" y="210" width="325" height="210" rx="12" fill="#0f172a"/>
    <rect x="385" y="210" width="325" height="40" rx="12 12 0 0" fill="#22c55e"/>
    <text x="547" y="237" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="14" font-weight="bold" fill="#f8fafc">IDCG (Ideal DCG)</text>
    
    <text x="405" y="275" font-family="Segoe UI, sans-serif" font-size="12" font-weight="bold" fill="#f8fafc">Ideal order: [3, 3, 2, 2, 1, 0]</text>
    
    <text x="405" y="305" font-family="monospace" font-size="11" fill="#475569">Pos 1: 3 / logâ‚‚(2) = 3.00</text>
    <text x="405" y="325" font-family="monospace" font-size="11" fill="#475569">Pos 2: 3 / logâ‚‚(3) = 1.89</text>
    <text x="405" y="345" font-family="monospace" font-size="11" fill="#475569">Pos 3: 2 / logâ‚‚(4) = 1.00</text>
    <text x="405" y="365" font-family="monospace" font-size="11" fill="#475569">Pos 4: 2 / logâ‚‚(5) = 0.86</text>
    <text x="405" y="385" font-family="monospace" font-size="11" fill="#475569">Pos 5: 1 / logâ‚‚(6) = 0.39</text>
    
    <rect x="400" y="395" width="150" height="20" rx="4" fill="#dcfce7"/>
    <text x="475" y="409" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="12" font-weight="bold" fill="#166534">IDCG@5 = 7.14</text>
  </g>
  
  <!-- Final NDCG -->
  <g filter="url(#shadow)">
    <rect x="200" y="435" width="350" height="50" rx="25" fill="#0f172a"/>
    <text x="375" y="467" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="16" font-weight="bold" fill="#22c55e">NDCG@5 = DCG/IDCG = 6.15/7.14 = 0.86</text>
  </g>
</svg>



