<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 400">
  <defs>
    <linearGradient id="bgOnline" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f172a"/>
      <stop offset="100%" style="stop-color:#1e293b"/>
    </linearGradient>
    <linearGradient id="requestGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6"/>
      <stop offset="100%" style="stop-color:#2563eb"/>
    </linearGradient>
    <linearGradient id="featureGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6"/>
      <stop offset="100%" style="stop-color:#7c3aed"/>
    </linearGradient>
    <linearGradient id="modelGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981"/>
      <stop offset="100%" style="stop-color:#059669"/>
    </linearGradient>
    <linearGradient id="responseGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b"/>
      <stop offset="100%" style="stop-color:#d97706"/>
    </linearGradient>
    <filter id="shadowOnline" x="-10%" y="-10%" width="120%" height="130%">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-opacity="0.3"/>
    </filter>
    <filter id="glowOnline">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <marker id="arrowOnline" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#10b981"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="100%" height="100%" fill="url(#bgOnline)"/>
  
  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" font-family="system-ui, sans-serif" font-size="22" font-weight="bold" fill="#f8fafc">Online Feature Serving Flow</text>
  <text x="450" y="58" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" fill="#94a3b8">Real-time feature retrieval for ML inference â€” Total latency budget: ~50ms</text>
  
  <!-- User Request -->
  <g filter="url(#shadowOnline)">
    <rect x="40" y="100" width="140" height="100" rx="12" fill="#1e293b" stroke="#3b82f6" stroke-width="2"/>
    <circle cx="110" cy="130" r="25" fill="url(#requestGrad)"/>
    <text x="110" y="137" text-anchor="middle" font-family="system-ui, sans-serif" font-size="20" fill="#f8fafc">ğŸ‘¤</text>
    <text x="110" y="175" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#60a5fa">User Request</text>
    <text x="110" y="192" text-anchor="middle" font-family="monospace" font-size="9" fill="#94a3b8">{user_id, context}</text>
  </g>
  
  <!-- Arrow 1 -->
  <path d="M185 150 L235 150" stroke="#10b981" stroke-width="3" marker-end="url(#arrowOnline)" filter="url(#glowOnline)"/>
  <text x="210" y="140" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#64748b">~2ms</text>
  
  <!-- API Gateway -->
  <g filter="url(#shadowOnline)">
    <rect x="240" y="100" width="140" height="100" rx="12" fill="#1e293b" stroke="#64748b" stroke-width="2"/>
    <rect x="260" y="120" width="100" height="30" rx="6" fill="#334155"/>
    <text x="310" y="140" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#f8fafc">ğŸŒ API Gateway</text>
    <text x="310" y="175" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#94a3b8">Auth, Rate Limit</text>
    <text x="310" y="190" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#94a3b8">Load Balance</text>
  </g>
  
  <!-- Arrow 2 -->
  <path d="M385 150 L435 150" stroke="#10b981" stroke-width="3" marker-end="url(#arrowOnline)" filter="url(#glowOnline)"/>
  <text x="410" y="140" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#64748b">~1ms</text>
  
  <!-- Feature Store -->
  <g filter="url(#shadowOnline)">
    <rect x="440" y="85" width="160" height="130" rx="12" fill="#1e293b" stroke="#8b5cf6" stroke-width="2"/>
    <rect x="440" y="85" width="160" height="35" rx="12" fill="url(#featureGrad)"/>
    <rect x="440" y="108" width="160" height="12" fill="url(#featureGrad)"/>
    <text x="520" y="108" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="bold" fill="#f8fafc">ğŸª Feature Store</text>
    
    <!-- Cache layers -->
    <rect x="455" y="130" width="130" height="25" rx="4" fill="#2e1065" stroke="#a78bfa" stroke-width="1"/>
    <text x="520" y="147" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#c4b5fd">L1: Local Cache</text>
    
    <rect x="455" y="160" width="130" height="25" rx="4" fill="#2e1065" stroke="#a78bfa" stroke-width="1"/>
    <text x="520" y="177" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#c4b5fd">L2: Redis (~5ms)</text>
    
    <rect x="455" y="190" width="130" height="18" rx="4" fill="#1e1b4b"/>
    <text x="520" y="202" text-anchor="middle" font-family="monospace" font-size="8" fill="#a78bfa">P99 andlt; 10ms</text>
  </g>
  
  <!-- Arrow 3 -->
  <path d="M605 150 L655 150" stroke="#10b981" stroke-width="3" marker-end="url(#arrowOnline)" filter="url(#glowOnline)"/>
  <text x="630" y="140" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#64748b">~5ms</text>
  
  <!-- Model Server -->
  <g filter="url(#shadowOnline)">
    <rect x="660" y="100" width="140" height="100" rx="12" fill="#1e293b" stroke="#10b981" stroke-width="2"/>
    <rect x="660" y="100" width="140" height="30" rx="12" fill="url(#modelGrad)"/>
    <rect x="660" y="118" width="140" height="12" fill="url(#modelGrad)"/>
    <text x="730" y="122" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="bold" fill="#f8fafc">ğŸ¤– Model Server</text>
    <text x="730" y="155" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#94a3b8">TensorFlow/PyTorch</text>
    <text x="730" y="172" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#94a3b8">Inference: ~15ms</text>
    <rect x="680" y="180" width="100" height="15" rx="3" fill="#064e3b"/>
    <text x="730" y="191" text-anchor="middle" font-family="monospace" font-size="8" fill="#34d399">f(features) â†’ Å·</text>
  </g>
  
  <!-- Arrow 4 -->
  <path d="M805 150 L830 150 L830 280 L110 280 L110 250" stroke="#f59e0b" stroke-width="2" stroke-dasharray="6,3"/>
  
  <!-- Response -->
  <g filter="url(#shadowOnline)">
    <rect x="40" y="215" width="140" height="70" rx="10" fill="#1e293b" stroke="#f59e0b" stroke-width="2"/>
    <rect x="40" y="215" width="140" height="25" rx="10" fill="url(#responseGrad)"/>
    <rect x="40" y="230" width="140" height="10" fill="url(#responseGrad)"/>
    <text x="110" y="235" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="bold" fill="#f8fafc">ğŸ“¤ Response</text>
    <text x="110" y="260" text-anchor="middle" font-family="monospace" font-size="10" fill="#fbbf24">{prediction: 0.87}</text>
    <text x="110" y="277" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#94a3b8">~50ms total</text>
  </g>
  
  <!-- Latency breakdown -->
  <g filter="url(#shadowOnline)">
    <rect x="200" y="310" width="500" height="70" rx="10" fill="#1e293b" stroke="#334155" stroke-width="1"/>
    <text x="450" y="335" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#f8fafc">Latency Budget Breakdown</text>
    
    <!-- Progress bar segments -->
    <rect x="230" y="350" width="440" height="16" rx="4" fill="#0f172a"/>
    <rect x="230" y="350" width="35" height="16" rx="4" fill="#3b82f6"/>
    <rect x="265" y="350" width="18" height="16" fill="#64748b"/>
    <rect x="283" y="350" width="88" height="16" fill="#8b5cf6"/>
    <rect x="371" y="350" width="176" height="16" fill="#10b981"/>
    <rect x="547" y="350" width="88" height="16" fill="#f59e0b"/>
    <rect x="635" y="350" width="35" height="16" rx="4" fill="#ef4444"/>
    
    <text x="248" y="362" text-anchor="middle" font-family="system-ui, sans-serif" font-size="7" fill="#f8fafc">Net</text>
    <text x="327" y="362" text-anchor="middle" font-family="system-ui, sans-serif" font-size="7" fill="#f8fafc">Features</text>
    <text x="459" y="362" text-anchor="middle" font-family="system-ui, sans-serif" font-size="7" fill="#f8fafc">Model Inference</text>
    <text x="591" y="362" text-anchor="middle" font-family="system-ui, sans-serif" font-size="7" fill="#f8fafc">Post</text>
    <text x="652" y="362" text-anchor="middle" font-family="system-ui, sans-serif" font-size="7" fill="#f8fafc">Buffer</text>
  </g>
</svg>
