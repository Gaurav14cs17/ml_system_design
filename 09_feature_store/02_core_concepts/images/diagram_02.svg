<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 520">
  <defs>
    <linearGradient id="bgGrad2" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f172a"/>
      <stop offset="100%" style="stop-color:#1e293b"/>
    </linearGradient>
    <linearGradient id="batchGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6"/>
      <stop offset="100%" style="stop-color:#1d4ed8"/>
    </linearGradient>
    <linearGradient id="streamGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6"/>
      <stop offset="100%" style="stop-color:#6d28d9"/>
    </linearGradient>
    <linearGradient id="ondemandGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b"/>
      <stop offset="100%" style="stop-color:#d97706"/>
    </linearGradient>
    <filter id="glow">
      <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <filter id="shadow2" x="-10%" y="-10%" width="120%" height="130%">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-opacity="0.3"/>
    </filter>
    <marker id="arrowBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3b82f6"/>
    </marker>
    <marker id="arrowPurple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#8b5cf6"/>
    </marker>
    <marker id="arrowOrange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f59e0b"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="100%" height="100%" fill="url(#bgGrad2)"/>
  
  <!-- Title -->
  <text x="450" y="40" text-anchor="middle" font-family="system-ui, sans-serif" font-size="24" font-weight="bold" fill="#f8fafc">Feature Computation Patterns</text>
  <text x="450" y="65" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" fill="#94a3b8">Three paradigms for computing and serving features</text>

  <!-- Batch Features Section -->
  <g filter="url(#shadow2)">
    <rect x="40" y="95" width="820" height="120" rx="12" fill="#1e293b" stroke="#334155" stroke-width="1"/>
    
    <!-- Header -->
    <rect x="40" y="95" width="820" height="35" rx="12" fill="url(#batchGrad)"/>
    <rect x="40" y="118" width="820" height="12" fill="url(#batchGrad)"/>
    <text x="70" y="118" font-family="system-ui, sans-serif" font-size="15" font-weight="bold" fill="#f8fafc">ðŸ“¦ BATCH FEATURES</text>
    <text x="790" y="118" font-family="system-ui, sans-serif" font-size="12" fill="#bfdbfe">Freshness: Hours</text>
    
    <!-- Flow diagram -->
    <rect x="70" y="145" width="100" height="45" rx="6" fill="#1e3a5f" stroke="#3b82f6" stroke-width="1"/>
    <text x="120" y="172" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#f8fafc">Raw Data</text>
    
    <path d="M175 167 L215 167" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrowBlue)"/>
    
    <rect x="220" y="145" width="120" height="45" rx="6" fill="#1e3a5f" stroke="#3b82f6" stroke-width="1"/>
    <text x="280" y="165" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#f8fafc">Spark/dbt Job</text>
    <text x="280" y="180" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#60a5fa">(scheduled)</text>
    
    <path d="M345 167 L385 167" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrowBlue)"/>
    
    <rect x="390" y="145" width="120" height="45" rx="6" fill="#1e3a5f" stroke="#3b82f6" stroke-width="1"/>
    <text x="450" y="172" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#f8fafc">Offline Store</text>
    
    <path d="M515 167 L555 167" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrowBlue)"/>
    
    <rect x="560" y="145" width="120" height="45" rx="6" fill="#1e3a5f" stroke="#3b82f6" stroke-width="1"/>
    <text x="620" y="172" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#f8fafc">Online Store</text>
    
    <!-- Examples -->
    <text x="720" y="155" font-family="monospace" font-size="10" fill="#94a3b8">Examples:</text>
    <text x="720" y="172" font-family="monospace" font-size="10" fill="#60a5fa">â€¢ user_lifetime_value</text>
    <text x="720" y="187" font-family="monospace" font-size="10" fill="#60a5fa">â€¢ daily_product_stats</text>
  </g>
  
  <!-- Streaming Features Section -->
  <g filter="url(#shadow2)">
    <rect x="40" y="230" width="820" height="120" rx="12" fill="#1e293b" stroke="#334155" stroke-width="1"/>
    
    <!-- Header -->
    <rect x="40" y="230" width="820" height="35" rx="12" fill="url(#streamGrad)"/>
    <rect x="40" y="253" width="820" height="12" fill="url(#streamGrad)"/>
    <text x="70" y="253" font-family="system-ui, sans-serif" font-size="15" font-weight="bold" fill="#f8fafc">âš¡ STREAMING FEATURES</text>
    <text x="790" y="253" font-family="system-ui, sans-serif" font-size="12" fill="#ddd6fe">Freshness: Seconds</text>
    
    <!-- Flow diagram -->
    <rect x="70" y="280" width="100" height="45" rx="6" fill="#2e1065" stroke="#8b5cf6" stroke-width="1"/>
    <text x="120" y="300" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#f8fafc">Kafka</text>
    <text x="120" y="315" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#a78bfa">events</text>
    
    <path d="M175 302 L215 302" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arrowPurple)"/>
    
    <rect x="220" y="280" width="120" height="45" rx="6" fill="#2e1065" stroke="#8b5cf6" stroke-width="1"/>
    <text x="280" y="300" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#f8fafc">Flink/Spark SS</text>
    <text x="280" y="315" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#a78bfa">(continuous)</text>
    
    <path d="M345 302 L555 302" stroke="#8b5cf6" stroke-width="2" stroke-dasharray="4,4" marker-end="url(#arrowPurple)"/>
    <text x="450" y="295" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#a78bfa">direct write</text>
    
    <rect x="560" y="280" width="120" height="45" rx="6" fill="#2e1065" stroke="#8b5cf6" stroke-width="1"/>
    <text x="620" y="307" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#f8fafc">Online Store</text>
    
    <!-- Examples -->
    <text x="720" y="290" font-family="monospace" font-size="10" fill="#94a3b8">Examples:</text>
    <text x="720" y="307" font-family="monospace" font-size="10" fill="#a78bfa">â€¢ clicks_last_5min</text>
    <text x="720" y="322" font-family="monospace" font-size="10" fill="#a78bfa">â€¢ txn_velocity_1h</text>
  </g>
  
  <!-- On-Demand Features Section -->
  <g filter="url(#shadow2)">
    <rect x="40" y="365" width="820" height="120" rx="12" fill="#1e293b" stroke="#334155" stroke-width="1"/>
    
    <!-- Header -->
    <rect x="40" y="365" width="820" height="35" rx="12" fill="url(#ondemandGrad)"/>
    <rect x="40" y="388" width="820" height="12" fill="url(#ondemandGrad)"/>
    <text x="70" y="388" font-family="system-ui, sans-serif" font-size="15" font-weight="bold" fill="#f8fafc">ðŸŽ¯ ON-DEMAND FEATURES</text>
    <text x="790" y="388" font-family="system-ui, sans-serif" font-size="12" fill="#fde68a">Freshness: Real-time</text>
    
    <!-- Flow diagram -->
    <rect x="70" y="415" width="100" height="45" rx="6" fill="#451a03" stroke="#f59e0b" stroke-width="1"/>
    <text x="120" y="435" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#f8fafc">Request</text>
    <text x="120" y="450" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#fbbf24">+ context</text>
    
    <path d="M175 437 L215 437" stroke="#f59e0b" stroke-width="2" marker-end="url(#arrowOrange)"/>
    
    <rect x="220" y="415" width="120" height="45" rx="6" fill="#451a03" stroke="#f59e0b" stroke-width="1"/>
    <text x="280" y="435" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#f8fafc">Transform</text>
    <text x="280" y="450" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#fbbf24">f(request, store)</text>
    
    <path d="M345 437 L555 437" stroke="#f59e0b" stroke-width="2" marker-end="url(#arrowOrange)"/>
    <text x="450" y="430" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#fbbf24">computed on-the-fly</text>
    
    <rect x="560" y="415" width="120" height="45" rx="6" fill="#451a03" stroke="#f59e0b" stroke-width="1"/>
    <text x="620" y="442" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#f8fafc">Response</text>
    
    <!-- Examples -->
    <text x="720" y="425" font-family="monospace" font-size="10" fill="#94a3b8">Examples:</text>
    <text x="720" y="442" font-family="monospace" font-size="10" fill="#fbbf24">â€¢ time_since_login</text>
    <text x="720" y="457" font-family="monospace" font-size="10" fill="#fbbf24">â€¢ distance_to_store</text>
  </g>
</svg>
