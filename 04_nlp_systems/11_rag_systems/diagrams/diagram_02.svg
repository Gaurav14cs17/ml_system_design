<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 420">
  <defs>
    <linearGradient id="chunkGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b"/>
      <stop offset="100%" style="stop-color:#d97706"/>
    </linearGradient>
    <linearGradient id="embedGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6"/>
      <stop offset="100%" style="stop-color:#2563eb"/>
    </linearGradient>
    <linearGradient id="retrieveGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6"/>
      <stop offset="100%" style="stop-color:#7c3aed"/>
    </linearGradient>
    <linearGradient id="genGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981"/>
      <stop offset="100%" style="stop-color:#059669"/>
    </linearGradient>
    <filter id="ragShadow"><feDropShadow dx="0" dy="3" stdDeviation="3" flood-opacity="0.2"/></filter>
  </defs>
  
  <rect width="100%" height="100%" fill="#0f172a"/>
  
  <text x="425" y="35" text-anchor="middle" font-family="Inter, sans-serif" font-size="22" font-weight="700" fill="#f8fafc">RAG Pipeline Components</text>
  <text x="425" y="58" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#64748b">Retrieval-Augmented Generation flow</text>
  
  <!-- Step 1: Chunking -->
  <g transform="translate(40, 90)" filter="url(#ragShadow)">
    <rect width="180" height="140" rx="12" fill="#1e293b" stroke="url(#chunkGrad)" stroke-width="2"/>
    <circle cx="20" cy="20" r="15" fill="url(#chunkGrad)"/>
    <text x="20" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" font-weight="600" fill="#fff">1</text>
    <text x="100" y="22" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" font-weight="600" fill="#fbbf24">Chunking</text>
    
    <g transform="translate(15, 40)">
      <text x="0" y="15" font-family="Inter, sans-serif" font-size="9" fill="#fcd34d">• Split documents</text>
      <text x="0" y="30" font-family="Inter, sans-serif" font-size="9" fill="#fcd34d">• Size: 256-512 tokens</text>
      <text x="0" y="45" font-family="Inter, sans-serif" font-size="9" fill="#fcd34d">• Overlap: 10-20%</text>
    </g>
    
    <rect x="15" y="100" width="150" height="25" rx="4" fill="#451a03"/>
    <text x="90" y="117" text-anchor="middle" font-family="Inter, sans-serif" font-size="8" fill="#fcd34d">Semantic chunking</text>
  </g>
  
  <line x1="225" y1="160" x2="255" y2="160" stroke="#fbbf24" stroke-width="2"/>
  <polygon points="255,160 248,155 248,165" fill="#fbbf24"/>
  
  <!-- Step 2: Embedding -->
  <g transform="translate(260, 90)" filter="url(#ragShadow)">
    <rect width="180" height="140" rx="12" fill="#1e293b" stroke="url(#embedGrad)" stroke-width="2"/>
    <circle cx="20" cy="20" r="15" fill="url(#embedGrad)"/>
    <text x="20" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" font-weight="600" fill="#fff">2</text>
    <text x="100" y="22" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" font-weight="600" fill="#60a5fa">Embedding</text>
    
    <g transform="translate(15, 40)">
      <text x="0" y="15" font-family="Inter, sans-serif" font-size="9" fill="#93c5fd">• Dense vectors</text>
      <text x="0" y="30" font-family="Inter, sans-serif" font-size="9" fill="#93c5fd">• Model: ada-002, e5</text>
      <text x="0" y="45" font-family="Inter, sans-serif" font-size="9" fill="#93c5fd">• Dim: 384-1536</text>
    </g>
    
    <rect x="15" y="100" width="150" height="25" rx="4" fill="#1e3a5f"/>
    <text x="90" y="117" text-anchor="middle" font-family="Inter, sans-serif" font-size="8" fill="#93c5fd">Store in vector DB</text>
  </g>
  
  <line x1="445" y1="160" x2="475" y2="160" stroke="#60a5fa" stroke-width="2"/>
  <polygon points="475,160 468,155 468,165" fill="#60a5fa"/>
  
  <!-- Step 3: Retrieval -->
  <g transform="translate(480, 90)" filter="url(#ragShadow)">
    <rect width="180" height="140" rx="12" fill="#1e293b" stroke="url(#retrieveGrad)" stroke-width="2"/>
    <circle cx="20" cy="20" r="15" fill="url(#retrieveGrad)"/>
    <text x="20" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" font-weight="600" fill="#fff">3</text>
    <text x="100" y="22" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" font-weight="600" fill="#a78bfa">Retrieval</text>
    
    <g transform="translate(15, 40)">
      <text x="0" y="15" font-family="Inter, sans-serif" font-size="9" fill="#c4b5fd">• Query → embedding</text>
      <text x="0" y="30" font-family="Inter, sans-serif" font-size="9" fill="#c4b5fd">• Top-k nearest</text>
      <text x="0" y="45" font-family="Inter, sans-serif" font-size="9" fill="#c4b5fd">• k = 3-10 typical</text>
    </g>
    
    <rect x="15" y="100" width="150" height="25" rx="4" fill="#312e81"/>
    <text x="90" y="117" text-anchor="middle" font-family="Inter, sans-serif" font-size="8" fill="#c4b5fd">Rerank with cross-enc</text>
  </g>
  
  <line x1="665" y1="160" x2="695" y2="160" stroke="#a78bfa" stroke-width="2"/>
  <polygon points="695,160 688,155 688,165" fill="#a78bfa"/>
  
  <!-- Step 4: Generation -->
  <g transform="translate(700, 90)" filter="url(#ragShadow)">
    <rect width="120" height="140" rx="12" fill="#1e293b" stroke="url(#genGrad)" stroke-width="2"/>
    <circle cx="20" cy="20" r="15" fill="url(#genGrad)"/>
    <text x="20" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" font-weight="600" fill="#fff">4</text>
    <text x="70" y="22" text-anchor="middle" font-family="Inter, sans-serif" font-size="11" font-weight="600" fill="#34d399">Generate</text>
    
    <g transform="translate(10, 40)">
      <text x="0" y="15" font-family="Inter, sans-serif" font-size="9" fill="#6ee7b7">• LLM</text>
      <text x="0" y="30" font-family="Inter, sans-serif" font-size="9" fill="#6ee7b7">• Context</text>
      <text x="0" y="45" font-family="Inter, sans-serif" font-size="9" fill="#6ee7b7">• Answer</text>
    </g>
  </g>
  
  <!-- Key metrics -->
  <g transform="translate(50, 260)" filter="url(#ragShadow)">
    <rect width="750" height="130" rx="12" fill="#1e293b" stroke="#475569"/>
    <text x="375" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#94a3b8">RAG Evaluation Metrics</text>
    
    <g transform="translate(30, 45)">
      <rect x="0" y="0" width="160" height="65" rx="6" fill="#064e3b"/>
      <text x="80" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="10" font-weight="600" fill="#34d399">Retrieval</text>
      <text x="80" y="40" text-anchor="middle" font-family="Inter, sans-serif" font-size="9" fill="#6ee7b7">Recall@k, MRR</text>
      <text x="80" y="55" text-anchor="middle" font-family="Inter, sans-serif" font-size="9" fill="#6ee7b7">Context Relevance</text>
    </g>
    
    <g transform="translate(210, 45)">
      <rect x="0" y="0" width="160" height="65" rx="6" fill="#312e81"/>
      <text x="80" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="10" font-weight="600" fill="#a78bfa">Generation</text>
      <text x="80" y="40" text-anchor="middle" font-family="Inter, sans-serif" font-size="9" fill="#c4b5fd">Answer Relevance</text>
      <text x="80" y="55" text-anchor="middle" font-family="Inter, sans-serif" font-size="9" fill="#c4b5fd">Faithfulness</text>
    </g>
    
    <g transform="translate(390, 45)">
      <rect x="0" y="0" width="160" height="65" rx="6" fill="#1e3a5f"/>
      <text x="80" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="10" font-weight="600" fill="#60a5fa">End-to-End</text>
      <text x="80" y="40" text-anchor="middle" font-family="Inter, sans-serif" font-size="9" fill="#93c5fd">Answer Accuracy</text>
      <text x="80" y="55" text-anchor="middle" font-family="Inter, sans-serif" font-size="9" fill="#93c5fd">Latency (p50, p99)</text>
    </g>
    
    <g transform="translate(570, 45)">
      <rect x="0" y="0" width="160" height="65" rx="6" fill="#451a03"/>
      <text x="80" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="10" font-weight="600" fill="#fbbf24">RAGAS</text>
      <text x="80" y="40" text-anchor="middle" font-family="Inter, sans-serif" font-size="9" fill="#fcd34d">Automated eval</text>
      <text x="80" y="55" text-anchor="middle" font-family="Inter, sans-serif" font-size="9" fill="#fcd34d">framework</text>
    </g>
  </g>
</svg>
