<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 550">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#fbbf24"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="850" height="550" fill="#0f172a" rx="12"/>
  
  <!-- Title -->
  <text x="425" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#f8fafc">SIFT PIPELINE</text>
  <text x="425" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#94a3b8">Scale-Invariant Feature Transform</text>
  
  <!-- Step 1: Scale-Space Extrema Detection -->
  <g transform="translate(30, 80)">
    <rect width="180" height="170" rx="10" fill="#1e293b" stroke="#3b82f6" stroke-width="2"/>
    <text x="90" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#60a5fa">Step 1: Scale-Space</text>
    <text x="90" y="42" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#93c5fd">Extrema Detection</text>
    
    <!-- DoG pyramid visualization -->
    <g transform="translate(30, 55)">
      <rect width="120" height="25" rx="4" fill="#334155" stroke="#3b82f6" stroke-width="1"/>
      <circle cx="20" cy="12" r="6" fill="none" stroke="#60a5fa" stroke-width="2"/>
      <circle cx="45" cy="12" r="5" fill="none" stroke="#60a5fa" stroke-width="2"/>
      <circle cx="65" cy="12" r="4" fill="none" stroke="#60a5fa" stroke-width="2"/>
      <circle cx="85" cy="12" r="3" fill="none" stroke="#60a5fa" stroke-width="2"/>
      <circle cx="100" cy="12" r="2" fill="none" stroke="#60a5fa" stroke-width="2"/>
      
      <rect y="30" width="100" height="22" rx="4" fill="#334155" stroke="#3b82f6" stroke-width="1"/>
      <rect y="57" width="80" height="20" rx="4" fill="#334155" stroke="#3b82f6" stroke-width="1"/>
    </g>
    
    <text x="90" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#93c5fd">DoG pyramid</text>
    <text x="90" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#94a3b8">Detect extrema</text>
  </g>
  
  <!-- Arrow 1 -->
  <path d="M 220 165 L 250 165" stroke="#fbbf24" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Step 2: Keypoint Localization -->
  <g transform="translate(260, 80)">
    <rect width="180" height="170" rx="10" fill="#1e293b" stroke="#f59e0b" stroke-width="2"/>
    <text x="90" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#fbbf24">Step 2: Keypoint</text>
    <text x="90" y="42" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#fcd34d">Localization</text>
    
    <!-- Refined keypoint -->
    <g transform="translate(30, 55)">
      <rect width="120" height="80" rx="4" fill="#334155" stroke="#f59e0b" stroke-width="1"/>
      <circle cx="60" cy="40" r="8" fill="#f59e0b"/>
      <circle cx="60" cy="40" r="15" fill="none" stroke="#fbbf24" stroke-width="1" stroke-dasharray="3"/>
    </g>
    
    <text x="90" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fcd34d">Sub-pixel refinement</text>
    <text x="90" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#94a3b8">Remove unstable</text>
  </g>
  
  <!-- Arrow 2 -->
  <path d="M 450 165 L 480 165" stroke="#fbbf24" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Step 3: Orientation Assignment -->
  <g transform="translate(490, 80)">
    <rect width="180" height="170" rx="10" fill="#1e293b" stroke="#10b981" stroke-width="2"/>
    <text x="90" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#34d399">Step 3: Orientation</text>
    <text x="90" y="42" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#6ee7b7">Assignment</text>
    
    <!-- Orientation arrows -->
    <g transform="translate(30, 55)">
      <rect width="120" height="80" rx="4" fill="#334155" stroke="#10b981" stroke-width="1"/>
      <circle cx="60" cy="40" r="8" fill="#10b981"/>
      <!-- Direction arrow -->
      <line x1="60" y1="40" x2="90" y2="25" stroke="#4ade80" stroke-width="3"/>
      <polygon points="90,25 82,22 85,30" fill="#4ade80"/>
    </g>
    
    <text x="90" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#6ee7b7">Gradient histogram</text>
    <text x="90" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#94a3b8">Dominant direction</text>
  </g>
  
  <!-- Step 4: Descriptor Generation -->
  <g transform="translate(150, 280)">
    <rect width="550" height="240" rx="10" fill="#1e293b" stroke="#8b5cf6" stroke-width="2"/>
    <text x="275" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#a78bfa">Step 4: Descriptor Generation</text>
    <text x="275" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#c4b5fd">16×16 window around keypoint</text>
    
    <!-- 4x4 grid of regions -->
    <g transform="translate(40, 60)">
      <!-- Main grid -->
      <rect width="160" height="160" fill="#334155" stroke="#8b5cf6" stroke-width="2"/>
      <!-- Grid lines -->
      <line x1="40" y1="0" x2="40" y2="160" stroke="#a78bfa" stroke-width="1"/>
      <line x1="80" y1="0" x2="80" y2="160" stroke="#a78bfa" stroke-width="1"/>
      <line x1="120" y1="0" x2="120" y2="160" stroke="#a78bfa" stroke-width="1"/>
      <line x1="0" y1="40" x2="160" y2="40" stroke="#a78bfa" stroke-width="1"/>
      <line x1="0" y1="80" x2="160" y2="80" stroke="#a78bfa" stroke-width="1"/>
      <line x1="0" y1="120" x2="160" y2="120" stroke="#a78bfa" stroke-width="1"/>
      
      <!-- Labels in cells -->
      <text x="20" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#c4b5fd">4×4</text>
      <text x="60" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#c4b5fd">4×4</text>
      <text x="100" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#c4b5fd">4×4</text>
      <text x="140" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#c4b5fd">4×4</text>
    </g>
    
    <!-- Arrow to histogram -->
    <path d="M 220 140 L 270 140" stroke="#fbbf24" stroke-width="2" marker-end="url(#arrow)"/>
    
    <!-- Histogram representation -->
    <g transform="translate(290, 80)">
      <text x="100" y="0" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#c4b5fd">8-bin histogram per region</text>
      
      <!-- Histogram bars -->
      <rect x="20" y="20" width="15" height="80" fill="#334155" stroke="#8b5cf6" stroke-width="1"/>
      <rect x="20" y="50" width="15" height="50" fill="#a78bfa"/>
      
      <rect x="40" y="20" width="15" height="80" fill="#334155" stroke="#8b5cf6" stroke-width="1"/>
      <rect x="40" y="30" width="15" height="70" fill="#a78bfa"/>
      
      <rect x="60" y="20" width="15" height="80" fill="#334155" stroke="#8b5cf6" stroke-width="1"/>
      <rect x="60" y="60" width="15" height="40" fill="#a78bfa"/>
      
      <rect x="80" y="20" width="15" height="80" fill="#334155" stroke="#8b5cf6" stroke-width="1"/>
      <rect x="80" y="75" width="15" height="25" fill="#a78bfa"/>
      
      <rect x="100" y="20" width="15" height="80" fill="#334155" stroke="#8b5cf6" stroke-width="1"/>
      <rect x="100" y="55" width="15" height="45" fill="#a78bfa"/>
      
      <rect x="120" y="20" width="15" height="80" fill="#334155" stroke="#8b5cf6" stroke-width="1"/>
      <rect x="120" y="40" width="15" height="60" fill="#a78bfa"/>
      
      <rect x="140" y="20" width="15" height="80" fill="#334155" stroke="#8b5cf6" stroke-width="1"/>
      <rect x="140" y="70" width="15" height="30" fill="#a78bfa"/>
      
      <rect x="160" y="20" width="15" height="80" fill="#334155" stroke="#8b5cf6" stroke-width="1"/>
      <rect x="160" y="45" width="15" height="55" fill="#a78bfa"/>
      
      <text x="100" y="115" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#94a3b8">8 orientation bins</text>
    </g>
    
    <!-- Final descriptor -->
    <g transform="translate(290, 170)">
      <rect width="220" height="40" rx="6" fill="#4c1d95" stroke="#8b5cf6" stroke-width="2"/>
      <text x="110" y="18" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#e9d5ff">4 × 4 × 8 = 128-dim</text>
      <text x="110" y="33" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#c4b5fd">descriptor vector</text>
    </g>
  </g>
</svg>
