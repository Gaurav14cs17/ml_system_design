<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 600">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#60a5fa"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4ade80"/>
    </marker>
    <marker id="arrowPurple" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#a78bfa"/>
    </marker>
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f172a"/>
      <stop offset="100%" style="stop-color:#1e293b"/>
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="850" height="600" fill="url(#bgGrad)" rx="12"/>
  
  <!-- Title -->
  <text x="425" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#f8fafc">RESIDUAL BLOCK CONCEPT</text>
  <text x="425" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#94a3b8">Skip Connections in ResNet</text>
  
  <!-- Without Skip Connection -->
  <g transform="translate(80, 80)">
    <rect width="280" height="280" rx="12" fill="#1e293b" stroke="#ef4444" stroke-width="2"/>
    <text x="140" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#f87171">Without Skip Connection</text>
    
    <!-- Input x -->
    <rect x="110" y="40" width="60" height="25" rx="4" fill="#334155" stroke="#60a5fa" stroke-width="1"/>
    <text x="140" y="57" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#f8fafc">x</text>
    
    <!-- Arrow down -->
    <line x1="140" y1="65" x2="140" y2="85" stroke="#60a5fa" stroke-width="2" marker-end="url(#arrow)"/>
    
    <!-- Conv block -->
    <rect x="60" y="95" width="160" height="110" rx="8" fill="#334155" stroke="#ef4444" stroke-width="2"/>
    <text x="140" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#fca5a5">Conv - BN - ReLU</text>
    <line x1="70" y1="135" x2="210" y2="135" stroke="#475569" stroke-width="1"/>
    <text x="140" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#fca5a5">Conv - BN</text>
    <text x="140" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#94a3b8">F(x)</text>
    
    <!-- Arrow down -->
    <line x1="140" y1="205" x2="140" y2="230" stroke="#60a5fa" stroke-width="2" marker-end="url(#arrow)"/>
    
    <!-- Output -->
    <rect x="90" y="240" width="100" height="25" rx="4" fill="#ef4444" stroke="#f87171" stroke-width="1"/>
    <text x="140" y="257" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#fff">Output = F(x)</text>
  </g>
  
  <!-- With Skip Connection -->
  <g transform="translate(490, 80)">
    <rect width="280" height="280" rx="12" fill="#1e293b" stroke="#22c55e" stroke-width="2"/>
    <text x="140" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#4ade80">With Skip Connection (ResNet)</text>
    
    <!-- Input x -->
    <rect x="110" y="40" width="60" height="25" rx="4" fill="#334155" stroke="#60a5fa" stroke-width="1"/>
    <text x="140" y="57" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#f8fafc">x</text>
    
    <!-- Split point -->
    <circle cx="140" cy="75" r="4" fill="#60a5fa"/>
    <line x1="140" y1="65" x2="140" y2="75" stroke="#60a5fa" stroke-width="2"/>
    
    <!-- Left path (main) arrow down to conv -->
    <line x1="140" y1="75" x2="100" y2="75" stroke="#60a5fa" stroke-width="2"/>
    <line x1="100" y1="75" x2="100" y2="95" stroke="#60a5fa" stroke-width="2" marker-end="url(#arrow)"/>
    
    <!-- Right path (skip) -->
    <line x1="140" y1="75" x2="230" y2="75" stroke="#4ade80" stroke-width="3"/>
    <line x1="230" y1="75" x2="230" y2="195" stroke="#4ade80" stroke-width="3"/>
    <line x1="230" y1="195" x2="165" y2="195" stroke="#4ade80" stroke-width="3" marker-end="url(#arrowGreen)"/>
    <text x="245" y="140" font-family="Arial, sans-serif" font-size="10" fill="#4ade80">identity</text>
    <text x="245" y="152" font-family="Arial, sans-serif" font-size="10" fill="#4ade80">(skip)</text>
    
    <!-- Conv block -->
    <rect x="40" y="105" width="120" height="70" rx="8" fill="#334155" stroke="#22c55e" stroke-width="2"/>
    <text x="100" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#86efac">Conv - BN - ReLU</text>
    <text x="100" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#86efac">Conv - BN</text>
    <text x="100" y="168" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#94a3b8">F(x)</text>
    
    <!-- Arrow from conv to addition -->
    <line x1="100" y1="175" x2="100" y2="195" stroke="#60a5fa" stroke-width="2"/>
    <line x1="100" y1="195" x2="125" y2="195" stroke="#60a5fa" stroke-width="2" marker-end="url(#arrow)"/>
    
    <!-- Addition circle -->
    <circle cx="145" cy="195" r="18" fill="#22c55e" stroke="#4ade80" stroke-width="2"/>
    <text x="145" y="201" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#fff">+</text>
    
    <!-- Arrow down from addition -->
    <line x1="145" y1="213" x2="145" y2="238" stroke="#60a5fa" stroke-width="2" marker-end="url(#arrow)"/>
    
    <!-- Output -->
    <rect x="80" y="248" width="130" height="25" rx="4" fill="#22c55e" stroke="#4ade80" stroke-width="1"/>
    <text x="145" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#fff">Output = F(x) + x</text>
  </g>
  
  <!-- Bottleneck Block -->
  <g transform="translate(200, 390)">
    <rect width="450" height="190" rx="12" fill="#1e293b" stroke="#8b5cf6" stroke-width="2"/>
    <text x="225" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#a78bfa">BOTTLENECK BLOCK (ResNet-50+)</text>
    
    <!-- Input -->
    <rect x="50" y="45" width="70" height="22" rx="4" fill="#334155" stroke="#60a5fa" stroke-width="1"/>
    <text x="85" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#f8fafc">x (256ch)</text>
    
    <!-- Split point -->
    <circle cx="85" cy="77" r="3" fill="#60a5fa"/>
    <line x1="85" y1="67" x2="85" y2="77" stroke="#60a5fa" stroke-width="2"/>
    
    <!-- Main path down -->
    <line x1="85" y1="77" x2="85" y2="87" stroke="#60a5fa" stroke-width="2" marker-end="url(#arrow)"/>
    
    <!-- 1x1 reduce -->
    <rect x="45" y="95" width="80" height="22" rx="4" fill="#334155" stroke="#a78bfa" stroke-width="1"/>
    <text x="85" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#c4b5fd">1x1, 64 (reduce)</text>
    
    <line x1="85" y1="117" x2="85" y2="125" stroke="#60a5fa" stroke-width="2" marker-end="url(#arrow)"/>
    
    <!-- 3x3 process -->
    <rect x="45" y="133" width="80" height="22" rx="4" fill="#334155" stroke="#a78bfa" stroke-width="1"/>
    <text x="85" y="148" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#c4b5fd">3x3, 64 (process)</text>
    
    <line x1="85" y1="155" x2="85" y2="163" stroke="#60a5fa" stroke-width="2" marker-end="url(#arrow)"/>
    
    <!-- 1x1 expand -->
    <rect x="45" y="171" width="80" height="22" rx="4" fill="#334155" stroke="#a78bfa" stroke-width="1"/>
    <text x="85" y="186" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#c4b5fd">1x1, 256 (expand)</text>
    
    <!-- Arrow to addition -->
    <line x1="125" y1="182" x2="145" y2="182" stroke="#60a5fa" stroke-width="2" marker-end="url(#arrow)"/>
    
    <!-- Skip connection (dashed) -->
    <line x1="85" y1="77" x2="170" y2="77" stroke="#a78bfa" stroke-width="2"/>
    <line x1="170" y1="77" x2="170" y2="182" stroke="#a78bfa" stroke-width="2" stroke-dasharray="5,3"/>
    <line x1="170" y1="182" x2="175" y2="182" stroke="#a78bfa" stroke-width="2" marker-end="url(#arrowPurple)"/>
    <text x="178" y="130" font-family="Arial, sans-serif" font-size="8" fill="#a78bfa">skip</text>
    
    <!-- Addition -->
    <circle cx="160" cy="182" r="12" fill="#8b5cf6" stroke="#a78bfa" stroke-width="2"/>
    <text x="160" y="186" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#fff">+</text>
    
    <!-- Benefits -->
    <g transform="translate(210, 50)">
      <text x="0" y="10" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#a78bfa">Why Bottleneck?</text>
      <text x="0" y="35" font-family="Arial, sans-serif" font-size="10" fill="#c4b5fd">* 1x1 reduces dimensions (256-64)</text>
      <text x="0" y="55" font-family="Arial, sans-serif" font-size="10" fill="#c4b5fd">* 3x3 processes in smaller space</text>
      <text x="0" y="75" font-family="Arial, sans-serif" font-size="10" fill="#c4b5fd">* 1x1 expands back (64-256)</text>
      <text x="0" y="95" font-family="Arial, sans-serif" font-size="10" fill="#c4b5fd">* Much fewer parameters!</text>
      <text x="0" y="120" font-family="Arial, sans-serif" font-size="10" fill="#22c55e">Enables 152+ layer networks</text>
    </g>
  </g>
</svg>
