<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 550">
  <defs>
    <linearGradient id="sourceGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ff6b6b"/>
      <stop offset="100%" style="stop-color:#ee5a5a"/>
    </linearGradient>
    <linearGradient id="streamGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4ecdc4"/>
      <stop offset="100%" style="stop-color:#44a08d"/>
    </linearGradient>
    <linearGradient id="batchGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#667eea"/>
      <stop offset="100%" style="stop-color:#764ba2"/>
    </linearGradient>
    <linearGradient id="storeGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f093fb"/>
      <stop offset="100%" style="stop-color:#f5576c"/>
    </linearGradient>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4ecdc4"/>
    </marker>
    <marker id="arrowBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#667eea"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="550" fill="#0a0a1a"/>
  
  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" fill="#1e293b" font-family="Arial, sans-serif" font-size="24" font-weight="bold">
    Data Pipeline Architecture
  </text>
  
  <!-- Data Sources Section -->
  <g transform="translate(30, 70)">
    <rect x="0" y="0" width="180" height="180" rx="10" fill="#1e293b" stroke="#ff6b6b" stroke-width="2"/>
    <text x="90" y="25" text-anchor="middle" fill="#ff6b6b" font-family="Arial" font-size="14" font-weight="bold">üìä Data Sources</text>
    
    <rect x="15" y="40" width="150" height="35" rx="5" fill="#2d2d44"/>
    <text x="90" y="62" text-anchor="middle" fill="#1e293b" font-family="Arial" font-size="11">Impression Logs</text>
    
    <rect x="15" y="85" width="150" height="35" rx="5" fill="#2d2d44"/>
    <text x="90" y="107" text-anchor="middle" fill="#1e293b" font-family="Arial" font-size="11">Click Logs</text>
    
    <rect x="15" y="130" width="150" height="35" rx="5" fill="#2d2d44"/>
    <text x="90" y="152" text-anchor="middle" fill="#1e293b" font-family="Arial" font-size="11">Conversion Logs</text>
  </g>
  
  <!-- Kafka -->
  <g transform="translate(250, 100)">
    <rect x="0" y="0" width="120" height="80" rx="10" fill="url(#streamGrad)"/>
    <text x="60" y="35" text-anchor="middle" fill="#f8fafc" font-family="Arial" font-size="14" font-weight="bold">Kafka</text>
    <text x="60" y="55" text-anchor="middle" fill="#f8fafc" font-family="Arial" font-size="11">Message Queue</text>
    <text x="60" y="72" text-anchor="middle" fill="#c6f6d5" font-family="Arial" font-size="10">256 partitions</text>
  </g>
  
  <!-- Arrow from sources to Kafka -->
  <path d="M210 160 L250 160" stroke="#4ecdc4" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Real-time Layer -->
  <g transform="translate(420, 70)">
    <rect x="0" y="0" width="220" height="150" rx="10" fill="#1e293b" stroke="#4ecdc4" stroke-width="2"/>
    <text x="110" y="25" text-anchor="middle" fill="#4ecdc4" font-family="Arial" font-size="14" font-weight="bold">‚ö° Real-Time Layer</text>
    
    <rect x="15" y="40" width="190" height="40" rx="5" fill="#2d2d44"/>
    <text x="110" y="55" text-anchor="middle" fill="#4ecdc4" font-family="Arial" font-size="12" font-weight="bold">Apache Flink</text>
    <text x="110" y="72" text-anchor="middle" fill="#a0aec0" font-family="Arial" font-size="10">Stream Processing</text>
    
    <rect x="15" y="90" width="90" height="45" rx="5" fill="#2d2d44"/>
    <text x="60" y="110" text-anchor="middle" fill="#1e293b" font-family="Arial" font-size="10">Session</text>
    <text x="60" y="125" text-anchor="middle" fill="#a0aec0" font-family="Arial" font-size="9">Aggregation</text>
    
    <rect x="115" y="90" width="90" height="45" rx="5" fill="#2d2d44"/>
    <text x="160" y="110" text-anchor="middle" fill="#1e293b" font-family="Arial" font-size="10">Real-time</text>
    <text x="160" y="125" text-anchor="middle" fill="#a0aec0" font-family="Arial" font-size="9">Features</text>
  </g>
  
  <!-- Arrow to real-time -->
  <path d="M370 140 L420 140" stroke="#4ecdc4" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Feature Store (Redis) -->
  <g transform="translate(690, 90)">
    <rect x="0" y="0" width="160" height="100" rx="10" fill="url(#storeGrad)"/>
    <text x="80" y="30" text-anchor="middle" fill="#f8fafc" font-family="Arial" font-size="14" font-weight="bold">Redis Cluster</text>
    <text x="80" y="50" text-anchor="middle" fill="#f8fafc" font-family="Arial" font-size="11">Feature Store</text>
    <text x="80" y="70" text-anchor="middle" fill="#fce7f3" font-family="Arial" font-size="10">Online Features</text>
    <text x="80" y="88" text-anchor="middle" fill="#fce7f3" font-family="Arial" font-size="10">andlt; 1ms latency</text>
  </g>
  
  <!-- Arrow to Redis -->
  <path d="M640 145 L690 145" stroke="#f093fb" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Batch Layer -->
  <g transform="translate(250, 280)">
    <rect x="0" y="0" width="380" height="170" rx="10" fill="#1e293b" stroke="#667eea" stroke-width="2"/>
    <text x="190" y="25" text-anchor="middle" fill="#667eea" font-family="Arial" font-size="14" font-weight="bold">üì¶ Batch Layer</text>
    
    <!-- S3 Raw -->
    <rect x="20" y="45" width="100" height="50" rx="5" fill="#2d2d44"/>
    <text x="70" y="65" text-anchor="middle" fill="#1e293b" font-family="Arial" font-size="11">S3 Raw</text>
    <text x="70" y="82" text-anchor="middle" fill="#a0aec0" font-family="Arial" font-size="9">100B/day</text>
    
    <!-- Spark -->
    <rect x="140" y="45" width="100" height="50" rx="5" fill="url(#batchGrad)"/>
    <text x="190" y="65" text-anchor="middle" fill="#f8fafc" font-family="Arial" font-size="12" font-weight="bold">Spark</text>
    <text x="190" y="82" text-anchor="middle" fill="#e9d8fd" font-family="Arial" font-size="9">ETL Jobs</text>
    
    <!-- Training Data -->
    <rect x="260" y="45" width="100" height="50" rx="5" fill="#2d2d44"/>
    <text x="310" y="65" text-anchor="middle" fill="#1e293b" font-family="Arial" font-size="11">Training</text>
    <text x="310" y="82" text-anchor="middle" fill="#a0aec0" font-family="Arial" font-size="9">Parquet</text>
    
    <!-- Arrows between batch components -->
    <path d="M120 70 L140 70" stroke="#667eea" stroke-width="2" fill="none" marker-end="url(#arrowBlue)"/>
    <path d="M240 70 L260 70" stroke="#667eea" stroke-width="2" fill="none" marker-end="url(#arrowBlue)"/>
    
    <!-- Data Quality -->
    <rect x="20" y="110" width="100" height="45" rx="5" fill="#2d2d44" stroke="#48bb78"/>
    <text x="70" y="130" text-anchor="middle" fill="#48bb78" font-family="Arial" font-size="10">Data Quality</text>
    <text x="70" y="145" text-anchor="middle" fill="#a0aec0" font-family="Arial" font-size="9">Validation</text>
    
    <!-- Feature Pipeline -->
    <rect x="140" y="110" width="100" height="45" rx="5" fill="#2d2d44" stroke="#f6ad55"/>
    <text x="190" y="130" text-anchor="middle" fill="#f6ad55" font-family="Arial" font-size="10">Feature</text>
    <text x="190" y="145" text-anchor="middle" fill="#a0aec0" font-family="Arial" font-size="9">Pipeline</text>
    
    <!-- Model Training -->
    <rect x="260" y="110" width="100" height="45" rx="5" fill="#2d2d44" stroke="#fc8181"/>
    <text x="310" y="130" text-anchor="middle" fill="#fc8181" font-family="Arial" font-size="10">Model</text>
    <text x="310" y="145" text-anchor="middle" fill="#a0aec0" font-family="Arial" font-size="9">Training</text>
  </g>
  
  <!-- Arrow from Kafka to Batch -->
  <path d="M310 180 L310 280" stroke="#667eea" stroke-width="2" fill="none" marker-end="url(#arrowBlue)"/>
  
  <!-- Hive Feature Store -->
  <g transform="translate(690, 290)">
    <rect x="0" y="0" width="160" height="80" rx="10" fill="#2d2d44" stroke="#667eea" stroke-width="2"/>
    <text x="80" y="30" text-anchor="middle" fill="#667eea" font-family="Arial" font-size="14" font-weight="bold">Hive</text>
    <text x="80" y="50" text-anchor="middle" fill="#a0aec0" font-family="Arial" font-size="11">Offline Features</text>
    <text x="80" y="68" text-anchor="middle" fill="#718096" font-family="Arial" font-size="10">Historical Data</text>
  </g>
  
  <!-- Arrow to Hive -->
  <path d="M630 350 L690 330" stroke="#667eea" stroke-width="2" fill="none" marker-end="url(#arrowBlue)"/>
  
  <!-- Model Registry -->
  <g transform="translate(690, 400)">
    <rect x="0" y="0" width="160" height="80" rx="10" fill="#2d2d44" stroke="#fc8181" stroke-width="2"/>
    <text x="80" y="30" text-anchor="middle" fill="#fc8181" font-family="Arial" font-size="14" font-weight="bold">Model Registry</text>
    <text x="80" y="50" text-anchor="middle" fill="#a0aec0" font-family="Arial" font-size="11">Versioning</text>
    <text x="80" y="68" text-anchor="middle" fill="#718096" font-family="Arial" font-size="10">MLflow</text>
  </g>
  
  <!-- Arrow to Model Registry -->
  <path d="M630 420 L690 440" stroke="#fc8181" stroke-width="2" fill="none"/>
  
  <!-- Lambda Architecture Label -->
  <g transform="translate(30, 490)">
    <rect x="0" y="0" width="840" height="50" rx="8" fill="#1e293b" stroke="#4a5568"/>
    <text x="420" y="20" text-anchor="middle" fill="#a0aec0" font-family="Arial" font-size="12" font-weight="bold">Lambda Architecture: Real-time + Batch Processing</text>
    <text x="200" y="40" text-anchor="middle" fill="#4ecdc4" font-family="Arial" font-size="11">‚ö° Speed Layer: andlt;1 min latency</text>
    <text x="500" y="40" text-anchor="middle" fill="#667eea" font-family="Arial" font-size="11">üì¶ Batch Layer: Daily processing</text>
    <text x="750" y="40" text-anchor="middle" fill="#f093fb" font-family="Arial" font-size="11">üîç Serving Layer: Merged view</text>
  </g>
</svg>

